
<!-- TOC -->

- [硬件连接](#硬件连接)
- [上电运行](#上电运行)
- [下载运行例程](#下载运行例程)
    - [跑马灯例程](#跑马灯例程)
    - [蜂鸣器例程](#蜂鸣器例程)
    - [按键输入例程](#按键输入例程)

<!-- /TOC -->

> 初次使用YIQI-EVB-01开发板，需要参照以下步骤进行设置，以达到最佳使用效果。

# 硬件连接
- 因为BC95模组和8266模组共用一个串口2（USART2），所以建议将 **将BC95 PWR插上启用供电**，8266 PWR跳帽拔掉取消供电；
- BC95 6P排针用红色跳帽TX-RX2,RX-TX2,G-G相连实现MCU与BC95通讯；拔掉即断开通讯；
- 8266 6P排针用蓝色跳帽TX-RX1,RX-TX1,G-G相连，默认不连接8266 PWR就是关闭了8266模组的供电；
- 需要给8266下载程序时，就将8266 DOWN跳帽插上，8266刷机完成之后，需要将跳帽断开，8266重新上电；
- ST-LINK与开发板SD DOWN相连：G-GND，SWDIO-SWDIO，SWCLK-SWCLK，VCC可以不相连，通过下载软件即可给单片机下载程序或仿真或debug；
- 可将外置CH340与开发板BC95 Capture相连（黄色排针），监控BC95通讯采用：G-G，TX-RX，RX-TX；如需单独调试BC95模组，需要将黄色跳帽拔掉；
- 将DS18B20传感器3P排针按照方向插入开发板18B20母座，注意需要在电源关闭情况下拔插。由于DB18B20是单总线访问，所以**必须**是预先插入；
- 将4P XH2.54排线一头插入HX711传感器母座，另一头插入开发板3V3-PA11-PA15-G扩展排针，**注意红色方向对应3V3，黑色方向对应G**，注意需要在电源关闭情况下拔插；
- 将Micro USB插入开发板J1接口，另一头插入输出功率在500mA以上的USB接口，电脑需要安装CH340G驱动。可以通过配套资料中的驱动程序安装，或采用电脑驱动大师安装；
- 将14500 5号电池安装如电池座，**注意电池正负极方向**，万万不可反方向插入。

# 上电运行
- 在一切准备完毕确认无误的情况下，按下ON/OFF自锁开关，给开发板上电，PWR LED红色指示灯亮起，主板上电成功；
- 出厂默认程序运行后，D4，D5两个LED交替闪烁，并伴随蜂鸣器鸣叫；

# 下载运行例程
## 跑马灯例程
跑马灯是一个GPIO例程
- 根据出厂提供的开发板例程应用，在Keil或IAR编译完成（**注意IDE编辑器需要先下载STM32L1 HAL库**），下载至开发板；
- 采用烧写软件将例程hex文件下载到开发板
- 观察泡灯工作闪烁频率

## 蜂鸣器例程
蜂鸣器可以作为GPIO工作模式
- 

## 按键输入例程
- 将编译好的程序下载到开发板中
- 运行完成，在板载串口1中，会打印此时的DS18B20温度和HX711的称重量（**初始测试时称重器上不要放置物品**）
- 当温度大于20℃或重量超过40克，蜂鸣器会循环鸣叫
